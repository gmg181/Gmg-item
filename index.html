<!DOCTYPE html>
<html lang="en">
<head>
    <title>FREE FIRE VAULT</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <meta name="author" content="Starexx">
    <meta name="og:title" content="Starexx Items">
    <meta property="og:image" content="assets/og.jpg">
    <meta name="og:description" content="Search Free Fire game items by name or description to retrieve item ID, name & details.">
    <meta name="description" content="Free Fire is a multiplayer battle royale mobile game, developed and published by Garena for Android and iOS.">
    <meta name="keywords" content="free fire, ff items, item id search, OB49, Starexx">

    <link rel="stylesheet" href="https://item-starexx.vercel.app/src/styles.css">
    <style>
        /* Main search */
        .main-search {
            display: flex;
            align-items: center;
            background: #222;
            padding: 10px;
            gap: 10px;
        }
        .main-search .sidebar-textarea {
            flex: 1;
            height: 35px;
            resize: none;
            background: #111;
            color: white;
            border: none;
            padding: 5px;
        }
        .main-search .sidebar-search-icon {
            color: white;
        }

        /* OB49 search box styling */
        .id-search {
            display: flex;
            align-items: center;
            background: #2d2d2d;
            padding: 10px;
            gap: 10px;
            margin-top: 5px;
        }
        .id-search input {
            flex: 1;
            height: 35px;
            background: #111;
            color: white;
            border: none;
            padding: 5px;
        }
        .id-search .fa-hashtag {
            color: white;
        }

        /* Credit overlay in modal */
        .modal-img-container {
            position: relative;
        }
        .modal-credit {
            position: absolute;
            bottom: 10px;
            right: 10px;
            background: rgba(0,0,0,0.6);
            color: white;
            font-size: 12px;
            padding: 3px 6px;
            border-radius: 4px;
            pointer-events: none;
        }
    </style>
</head>
<body>
    <div class="loading-dot" id="loadingDot"></div>

    <!-- HEADER -->
    <div class="header" id="header">
        <div class="header-title-container">
            <div class="header-title">FREE FIRE VAULT</div>
            <div class="header-menu" id="menuButton">
                <i class="fas fa-bars"></i>
            </div>
        </div>
    </div>

    <!-- 🔍 Normal search -->
    <div class="main-search">
        <i class="fas fa-search sidebar-search-icon"></i>
        <textarea class="sidebar-textarea" id="searchMain" placeholder="Search by item details"></textarea>
    </div>

    <!-- 🆕 OB49 ID search -->
    <div class="id-search">
        <i class="fas fa-hashtag"></i>
        <input type="text" id="searchById" placeholder="Search by ID (Partial e.g. 49)">
    </div>

    <!-- SIDEBAR -->
    <div class="sidebar" id="sidebar">
        <div class="sidebar-close" id="sidebarClose">
            <i class="fas fa-times"></i>
        </div>
        <div class="sidebar-search">
            <i class="fas fa-search sidebar-search-icon"></i>
            <textarea class="sidebar-textarea" id="search" placeholder="Search by item details"></textarea>
        </div>
    </div>

    <div class="container" id="container" style="display: none;">
        <div class="grid-container" id="iconGrid"></div>
        <div class="pagination-container">
            <div class="pagination" id="pagination"></div>
        </div>
    </div>

    <!-- MODAL -->
    <div class="modal" id="modal">
        <div class="modal-bg"></div>
        <div class="modal-img-container" id="modalImgContainer">
            <img id="modalTempImage" alt="Item Image">
            <div class="modal-credit">Credit: GMG</div>
        </div>
        <div class="modal-content">
            <img id="modalImage" alt="Item Image">
            <p>
                <b id="modalDescription"></b><br>
                <span id="modalDescription2"></span>
            </p>
            <div class="divider"></div>
            <p>
                <b>Item ID: </b>
                <span id="modalItemId"></span><br>
                <b>Icon: </b>
                <span id="modalIconName"></span>
            </p>
            <div class="divider"></div>
            <p>
                <span id="modalType"></span>, <span id="modalRare"></span>
            </p>
            <button class="modal-close" onclick="closeModal()">Tap to close</button>
        </div>
    </div>

    <script src="https://item-starexx.vercel.app/src/script.js"></script>

    <!-- JS to sync normal search -->
    <script>
        const searchMain = document.getElementById("searchMain");
        const searchSidebar = document.getElementById("search");
        const searchById = document.getElementById("searchById");

        // Normal search sync
        searchMain.addEventListener("input", function () {
            searchSidebar.value = this.value;
            searchSidebar.dispatchEvent(new Event("input"));
        });
        searchSidebar.addEventListener("input", function () {
            searchMain.value = this.value;
        });

        // OB49 ID search (partial match anywhere in ID)
        searchById.addEventListener("input", function () {
            const query = this.value.trim();
            if (!window.allItems) return; // ensure items loaded

            const filtered = window.allItems.filter(item =>
                item.id.toString().includes(query)
            );

            renderItems(filtered); // function from script.js
        });

        // Hook into existing data load
        document.addEventListener("itemsLoaded", function(e) {
            window.allItems = e.detail; // store all items globally for OB49 search
        });
    </script>
</body>
    </html>
